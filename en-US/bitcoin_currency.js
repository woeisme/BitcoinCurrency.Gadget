var g_localized_strings = [];var g_update_interval = 60000;var xmlhttp = null;document.onreadystatechange = function(){    if(document.readyState == "complete")    {        //System.Gadget.settingsUI = "Settings.htm";        //System.Gadget.onSettingsClosed = settingsClosed;        System.Gadget.onUndock = resizeGadget;        System.Gadget.onDock = resizeGadget;        document.getElementById('btc_value').innerText = '...';        updateData();    }}function resizeGadget() {  if(System.Gadget.docked) {    document.body.width = 130;    document.body.style.height = 59;  } else {  }}function responseHandler(){  var re = new RegExp('"last":([0-9\.]+)');    if (xmlhttp.readyState == 4)  {     var parseText = new String(xmlhttp.responseText);    m = re.exec(parseText);    if (m != null && m.length == 2)      document.getElementById('btc_value').innerText = Math.round(m[1]*100)/100;  }}function updateData() {  // Attempt to initialize xmlhttp object  // NOTE: This object is recreated each time because otherwise it doesn't seem to work otherwise :(  try  {    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");  } catch (e) { }  xmlhttp.onReadyStateChange = responseHandler;  xmlhttp.open("GET","https://www.mtgox.com/code/data/ticker.php?" + Math.random(),true);  xmlhttp.send();    setTimeout("updateData()", g_update_interval);/*  ////////////////////////////////////////////////////////////////////  // Fails when used inside a gadget :(  ////////////////////////////////////////////////////////////////////  // Make ajax call  jqxhr = $.ajax({    url: 'https://www.mtgox.com/code/data/ticker.php',    //crossDomain: true,    dataType: 'json',    error: function(jqXHR, textStatus, errorThrown) {       $('#btc_value').text(errorThrown);    },    success: function(data, textStatus, jqXHR) {         }  });*/}